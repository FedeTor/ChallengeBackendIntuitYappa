ì$
]C:\Users\LENOVO\Desktop\Challenge Intui\backend\clientes\src\Clientes\Clientes.Api\Program.cs
var

 
builder

 
=

 
WebApplication

 
.

 
CreateBuilder

 *
(

* +
args

+ /
)

/ 0
;

0 1
if 
( 
builder 
. 
Environment 
. 
IsDevelopment %
(% &
)& '
)' (
{ 
builder 
. 
Configuration 
. 
AddUserSecrets (
<( )
Program) 0
>0 1
(1 2
)2 3
;3 4
} 
builder 
. 
Services 
. 
AddControllers 
(  
)  !
;! "
builder 
. 
Services 
. #
AddEndpointsApiExplorer (
(( )
)) *
;* +
builder 
. 
Services 
. 
AddSwaggerGen 
( 
options &
=>' )
{ 
var 
xmlFile 
= 
$" 
{ 
Assembly 
.  
GetExecutingAssembly 2
(2 3
)3 4
.4 5
GetName5 <
(< =
)= >
.> ?
Name? C
}C D
$strD H
"H I
;I J
var 
xmlPath 
= 
Path 
. 
Combine 
( 

AppContext )
.) *
BaseDirectory* 7
,7 8
xmlFile9 @
)@ A
;A B
if 
( 
File 
. 
Exists 
( 
xmlPath 
) 
) 
{ 
options 
. 
IncludeXmlComments "
(" #
xmlPath# *
)* +
;+ ,
} 
} 
) 
; 
builder 
. 
Services 
. 

AddMediatR 
( 
typeof "
(" # 
CreateClienteCommand# 7
)7 8
.8 9
Assembly9 A
)A B
;B C
builder 
. 
Services 
. 
AddSingleton 
< $
INpgsqlConnectionFactory 6
,6 7#
NpgsqlConnectionFactory8 O
>O P
(P Q
)Q R
;R S
builder   
.   
Services   
.   
	AddScoped   
<   #
IClienteWriteRepository   2
,  2 3"
ClienteWriteRepository  4 J
>  J K
(  K L
)  L M
;  M N
builder!! 
.!! 
Services!! 
.!! 
	AddScoped!! 
<!! "
IClienteReadRepository!! 1
,!!1 2!
ClienteReadRepository!!3 H
>!!H I
(!!I J
)!!J K
;!!K L
var## 
app## 
=## 	
builder##
 
.## 
Build## 
(## 
)## 
;## 
using%% 
(%% 
var%% 

scope%% 
=%% 
app%% 
.%% 
Services%% 
.%%  
CreateScope%%  +
(%%+ ,
)%%, -
)%%- .
{&& 
var'' 
services'' 
='' 
scope'' 
.'' 
ServiceProvider'' (
;''( )
await(( 	
DatabaseSeeder((
 
.(( 
	SeedAsync(( "
(((" #
services((# +
)((+ ,
;((, -
})) 
if,, 
(,, 
app,, 
.,, 
Environment,, 
.,, 
IsDevelopment,, !
(,,! "
),," #
),,# $
{-- 
app.. 
... 

UseSwagger.. 
(.. 
).. 
;.. 
app// 
.// 
UseSwaggerUI// 
(// 
)// 
;// 
}00 
app22 
.22 
UseHttpsRedirection22 
(22 
)22 
;22 
app44 
.44 
UseAuthorization44 
(44 
)44 
;44 
app66 
.66 
MapControllers66 
(66 
)66 
;66 
app88 
.88 
Run88 
(88 
)88 	
;88	 
Ú
qC:\Users\LENOVO\Desktop\Challenge Intui\backend\clientes\src\Clientes\Clientes.Api\Models\UpdateClienteRequest.cs
	namespace 	
Clientes
 
. 
Api 
. 
Models 
; 
public 
class  
UpdateClienteRequest !
{		 
[ 
Required 
] 
public 

string 
Nombre 
{ 
get 
; 
set  #
;# $
}% &
=' (
string) /
./ 0
Empty0 5
;5 6
[ 
Required 
] 
public 

string 
Apellido 
{ 
get  
;  !
set" %
;% &
}' (
=) *
string+ 1
.1 2
Empty2 7
;7 8
[ 
Required 
] 
public 

string 
RazonSocial 
{ 
get  #
;# $
set% (
;( )
}* +
=, -
string. 4
.4 5
Empty5 :
;: ;
[ 
Required 
] 
[   
RegularExpression   
(   
$str   2
,  2 3
ErrorMessage  4 @
=  A B
$str  C n
)  n o
]  o p
public!! 

string!! 
Cuit!! 
{!! 
get!! 
;!! 
set!! !
;!!! "
}!!# $
=!!% &
string!!' -
.!!- .
Empty!!. 3
;!!3 4
[&& 
Required&& 
]&& 
public'' 

DateOnly'' 
FechaNacimiento'' #
{''$ %
get''& )
;'') *
set''+ .
;''. /
}''0 1
[,, 
Required,, 
],, 
public-- 

string-- 
TelefonoCelular-- !
{--" #
get--$ '
;--' (
set--) ,
;--, -
}--. /
=--0 1
string--2 8
.--8 9
Empty--9 >
;--> ?
[22 
Required22 
]22 
[33 
EmailAddress33 
]33 
public44 

string44 
Email44 
{44 
get44 
;44 
set44 "
;44" #
}44$ %
=44& '
string44( .
.44. /
Empty44/ 4
;444 5
}55 Ú
qC:\Users\LENOVO\Desktop\Challenge Intui\backend\clientes\src\Clientes\Clientes.Api\Models\CreateClienteRequest.cs
	namespace 	
Clientes
 
. 
Api 
. 
Models 
; 
public 
class  
CreateClienteRequest !
{		 
[ 
Required 
] 
public 

string 
Nombre 
{ 
get 
; 
set  #
;# $
}% &
=' (
string) /
./ 0
Empty0 5
;5 6
[ 
Required 
] 
public 

string 
Apellido 
{ 
get  
;  !
set" %
;% &
}' (
=) *
string+ 1
.1 2
Empty2 7
;7 8
[ 
Required 
] 
public 

string 
RazonSocial 
{ 
get  #
;# $
set% (
;( )
}* +
=, -
string. 4
.4 5
Empty5 :
;: ;
[ 
Required 
] 
[   
RegularExpression   
(   
$str   2
,  2 3
ErrorMessage  4 @
=  A B
$str  C n
)  n o
]  o p
public!! 

string!! 
Cuit!! 
{!! 
get!! 
;!! 
set!! !
;!!! "
}!!# $
=!!% &
string!!' -
.!!- .
Empty!!. 3
;!!3 4
[&& 
Required&& 
]&& 
public'' 

DateOnly'' 
FechaNacimiento'' #
{''$ %
get''& )
;'') *
set''+ .
;''. /
}''0 1
[,, 
Required,, 
],, 
public-- 

string-- 
TelefonoCelular-- !
{--" #
get--$ '
;--' (
set--) ,
;--, -
}--. /
=--0 1
string--2 8
.--8 9
Empty--9 >
;--> ?
[22 
Required22 
]22 
[33 
EmailAddress33 
]33 
public44 

string44 
Email44 
{44 
get44 
;44 
set44 "
;44" #
}44$ %
=44& '
string44( .
.44. /
Empty44/ 4
;444 5
}55 Í
lC:\Users\LENOVO\Desktop\Challenge Intui\backend\clientes\src\Clientes\Clientes.Api\Models\ClienteResponse.cs
	namespace 	
Clientes
 
. 
Api 
. 
Models 
; 
public 
class 
ClienteResponse 
{ 
public 

int 
Id 
{ 
get 
; 
set 
; 
} 
public 

string 
Nombre 
{ 
get 
; 
set  #
;# $
}% &
=' (
string) /
./ 0
Empty0 5
;5 6
public 

string 
Apellido 
{ 
get  
;  !
set" %
;% &
}' (
=) *
string+ 1
.1 2
Empty2 7
;7 8
public 

string 
RazonSocial 
{ 
get  #
;# $
set% (
;( )
}* +
=, -
string. 4
.4 5
Empty5 :
;: ;
public 

string 
Cuit 
{ 
get 
; 
set !
;! "
}# $
=% &
string' -
.- .
Empty. 3
;3 4
public 

DateOnly 
FechaNacimiento #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 

string 
TelefonoCelular !
{" #
get$ '
;' (
set) ,
;, -
}. /
=0 1
string2 8
.8 9
Empty9 >
;> ?
public 

string 
Email 
{ 
get 
; 
set "
;" #
}$ %
=& '
string( .
.. /
Empty/ 4
;4 5
public 

DateTime 
FechaCreacion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 

DateTime 
FechaModificacion %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
} Ä
nC:\Users\LENOVO\Desktop\Challenge Intui\backend\clientes\src\Clientes\Clientes.Api\Mappings\ClienteMappings.cs
	namespace 	
Clientes
 
. 
Api 
. 
Mappings 
;  
public 
static 
class 
ClienteMappings #
{ 
public 

static 
ClienteResponse !

ToResponse" ,
(, -
this- 1
Cliente2 9
cliente: A
)A B
{		 
return

 
new

 
ClienteResponse

 "
{ 	
Id 
= 
cliente 
. 
Id 
, 
Nombre 
= 
cliente 
. 
Nombre #
,# $
Apellido 
= 
cliente 
. 
Apellido '
,' (
RazonSocial 
= 
cliente !
.! "
RazonSocial" -
,- .
Cuit 
= 
cliente 
. 
Cuit 
,  
FechaNacimiento 
= 
cliente %
.% &
FechaNacimiento& 5
,5 6
TelefonoCelular 
= 
cliente %
.% &
TelefonoCelular& 5
,5 6
Email 
= 
cliente 
. 
Email !
,! "
FechaCreacion 
= 
cliente #
.# $
FechaCreacion$ 1
,1 2
FechaModificacion 
= 
cliente  '
.' (
FechaModificacion( 9
} 	
;	 

} 
} ©¶
tC:\Users\LENOVO\Desktop\Challenge Intui\backend\clientes\src\Clientes\Clientes.Api\Controllers\ClientesController.cs
	namespace 	
Clientes
 
. 
Api 
. 
Controllers "
;" #
[ 
ApiController 
] 
[ 
Route 
( 
$str 
) 
] 
public 
class 
ClientesController 
:  !
ControllerBase" 0
{ 
private 
readonly 
	IMediator 
	_mediator (
;( )
private 
readonly 
ILogger 
< 
ClientesController /
>/ 0
_logger1 8
;8 9
public 

ClientesController 
( 
	IMediator '
mediator( 0
,0 1
ILogger2 9
<9 :
ClientesController: L
>L M
loggerN T
)T U
{ 
	_mediator 
= 
mediator 
; 
_logger 
= 
logger 
; 
} 
[   
HttpGet   
]   
[!!  
ProducesResponseType!! 
(!! 
typeof!!  
(!!  !
IEnumerable!!! ,
<!!, -
ClienteResponse!!- <
>!!< =
)!!= >
,!!> ?
StatusCodes!!@ K
.!!K L
Status200OK!!L W
)!!W X
]!!X Y
[""  
ProducesResponseType"" 
("" 
StatusCodes"" %
.""% &(
Status500InternalServerError""& B
)""B C
]""C D
public## 

async## 
Task## 
<## 
IActionResult## #
>### $
GetAll##% +
(##+ ,
CancellationToken##, =
cancellationToken##> O
)##O P
{$$ 
try%% 
{&& 	
var'' 
clientes'' 
='' 
await''  
	_mediator''! *
.''* +
Send''+ /
(''/ 0
new''0 3
GetAllClientesQuery''4 G
(''G H
)''H I
,''I J
cancellationToken''K \
)''\ ]
;''] ^
return(( 
Ok(( 
((( 
clientes(( 
.(( 
Select(( %
(((% &
c((& '
=>((( *
c((+ ,
.((, -

ToResponse((- 7
(((7 8
)((8 9
)((9 :
)((: ;
;((; <
})) 	
catch** 
(** 
	Exception** 
ex** 
)** 
{++ 	
_logger,, 
.,, 
LogError,, 
(,, 
ex,, 
,,,  
$str,,! Q
),,Q R
;,,R S
return-- 

StatusCode-- 
(-- 
StatusCodes-- )
.--) *(
Status500InternalServerError--* F
,--F G
new--H K
{--L M
message--N U
=--V W
$str--X v
}--w x
)--x y
;--y z
}.. 	
}// 
[44 
HttpGet44 
(44 
$str44 
)44 
]44 
[55  
ProducesResponseType55 
(55 
typeof55  
(55  !
ClienteResponse55! 0
)550 1
,551 2
StatusCodes553 >
.55> ?
Status200OK55? J
)55J K
]55K L
[66  
ProducesResponseType66 
(66 
StatusCodes66 %
.66% &
Status404NotFound66& 7
)667 8
]668 9
[77  
ProducesResponseType77 
(77 
StatusCodes77 %
.77% &(
Status500InternalServerError77& B
)77B C
]77C D
public88 

async88 
Task88 
<88 
IActionResult88 #
>88# $
GetById88% ,
(88, -
int88- 0
id881 3
,883 4
CancellationToken885 F
cancellationToken88G X
)88X Y
{99 
try:: 
{;; 	
var<< 
cliente<< 
=<< 
await<< 
	_mediator<<  )
.<<) *
Send<<* .
(<<. /
new<</ 2
GetClienteByIdQuery<<3 F
(<<F G
id<<G I
)<<I J
,<<J K
cancellationToken<<L ]
)<<] ^
;<<^ _
if>> 
(>> 
cliente>> 
is>> 
null>> 
)>>  
{?? 
return@@ 
NotFound@@ 
(@@  
)@@  !
;@@! "
}AA 
returnCC 
OkCC 
(CC 
clienteCC 
.CC 

ToResponseCC (
(CC( )
)CC) *
)CC* +
;CC+ ,
}DD 	
catchEE 
(EE $
ClienteNotFoundExceptionEE '
exEE( *
)EE* +
{FF 	
_loggerGG 
.GG 

LogWarningGG 
(GG 
exGG !
,GG! "
$strGG# ?
,GG? @
idGGA C
)GGC D
;GGD E
returnHH 
NotFoundHH 
(HH 
newHH 
{HH  !
messageHH" )
=HH* +
exHH, .
.HH. /
MessageHH/ 6
}HH7 8
)HH8 9
;HH9 :
}II 	
catchJJ 
(JJ 
	ExceptionJJ 
exJJ 
)JJ 
{KK 	
_loggerLL 
.LL 
LogErrorLL 
(LL 
exLL 
,LL  
$strLL! K
,LLK L
idLLM O
)LLO P
;LLP Q
returnMM 

StatusCodeMM 
(MM 
StatusCodesMM )
.MM) *(
Status500InternalServerErrorMM* F
,MMF G
newMMH K
{MML M
messageMMN U
=MMV W
$strMMX v
}MMw x
)MMx y
;MMy z
}NN 	
}OO 
[TT 
HttpGetTT 
(TT 
$strTT 
)TT 
]TT 
[UU  
ProducesResponseTypeUU 
(UU 
typeofUU  
(UU  !
IEnumerableUU! ,
<UU, -
ClienteResponseUU- <
>UU< =
)UU= >
,UU> ?
StatusCodesUU@ K
.UUK L
Status200OKUUL W
)UUW X
]UUX Y
[VV  
ProducesResponseTypeVV 
(VV 
StatusCodesVV %
.VV% &
Status400BadRequestVV& 9
)VV9 :
]VV: ;
[WW  
ProducesResponseTypeWW 
(WW 
StatusCodesWW %
.WW% &(
Status500InternalServerErrorWW& B
)WWB C
]WWC D
publicXX 

asyncXX 
TaskXX 
<XX 
IActionResultXX #
>XX# $
SearchXX% +
(XX+ ,
[XX, -
	FromQueryXX- 6
]XX6 7
stringXX8 >
termXX? C
,XXC D
CancellationTokenXXE V
cancellationTokenXXW h
)XXh i
{YY 
ifZZ 

(ZZ 
stringZZ 
.ZZ 
IsNullOrWhiteSpaceZZ %
(ZZ% &
termZZ& *
)ZZ* +
)ZZ+ ,
{[[ 	
_logger\\ 
.\\ 

LogWarning\\ 
(\\ 
$str\\ Y
)\\Y Z
;\\Z [
return]] 

BadRequest]] 
(]] 
new]] !
{]]" #
message]]$ +
=]], -
$str]]. Q
}]]R S
)]]S T
;]]T U
}^^ 	
try`` 
{aa 	
varbb 
clientesbb 
=bb 
awaitbb  
	_mediatorbb! *
.bb* +
Sendbb+ /
(bb/ 0
newbb0 3%
SearchClientesByNameQuerybb4 M
(bbM N
termbbN R
)bbR S
,bbS T
cancellationTokenbbU f
)bbf g
;bbg h
returncc 
Okcc 
(cc 
clientescc 
.cc 
Selectcc %
(cc% &
ccc& '
=>cc( *
ccc+ ,
.cc, -

ToResponsecc- 7
(cc7 8
)cc8 9
)cc9 :
)cc: ;
;cc; <
}dd 	
catchee 
(ee 
	Exceptionee 
exee 
)ee 
{ff 	
_loggergg 
.gg 
LogErrorgg 
(gg 
exgg 
,gg  
$strgg! Y
,ggY Z
termgg[ _
)gg_ `
;gg` a
returnhh 

StatusCodehh 
(hh 
StatusCodeshh )
.hh) *(
Status500InternalServerErrorhh* F
,hhF G
newhhH K
{hhL M
messagehhN U
=hhV W
$strhhX v
}hhw x
)hhx y
;hhy z
}ii 	
}jj 
[oo 
HttpPostoo 
]oo 
[pp  
ProducesResponseTypepp 
(pp 
typeofpp  
(pp  !
ClienteResponsepp! 0
)pp0 1
,pp1 2
StatusCodespp3 >
.pp> ?
Status201Createdpp? O
)ppO P
]ppP Q
[qq  
ProducesResponseTypeqq 
(qq 
StatusCodesqq %
.qq% &
Status400BadRequestqq& 9
)qq9 :
]qq: ;
[rr  
ProducesResponseTyperr 
(rr 
StatusCodesrr %
.rr% &
Status409Conflictrr& 7
)rr7 8
]rr8 9
[ss  
ProducesResponseTypess 
(ss 
StatusCodesss %
.ss% &(
Status500InternalServerErrorss& B
)ssB C
]ssC D
publictt 

asynctt 
Tasktt 
<tt 
IActionResulttt #
>tt# $
Creatett% +
(tt+ ,
[tt, -
FromBodytt- 5
]tt5 6 
CreateClienteRequesttt7 K
requestttL S
,ttS T
CancellationTokenttU f
cancellationTokenttg x
)ttx y
{uu 
ifvv 

(vv 
!vv 

ModelStatevv 
.vv 
IsValidvv 
)vv  
{ww 	
_loggerxx 
.xx 

LogWarningxx 
(xx 
$strxx P
,xxP Q

ModelStatexxR \
)xx\ ]
;xx] ^
returnyy 
ValidationProblemyy $
(yy$ %

ModelStateyy% /
)yy/ 0
;yy0 1
}zz 	
var|| 
command|| 
=|| 
new||  
CreateClienteCommand|| .
(||. /
request}} 
.}} 
Nombre}} 
,}} 
request~~ 
.~~ 
Apellido~~ 
,~~ 
request 
. 
RazonSocial 
,  
request
ÄÄ 
.
ÄÄ 
Cuit
ÄÄ 
,
ÄÄ 
request
ÅÅ 
.
ÅÅ 
FechaNacimiento
ÅÅ #
,
ÅÅ# $
request
ÇÇ 
.
ÇÇ 
TelefonoCelular
ÇÇ #
,
ÇÇ# $
request
ÉÉ 
.
ÉÉ 
Email
ÉÉ 
)
ÉÉ 
;
ÉÉ 
try
ÖÖ 
{
ÜÜ 	
var
áá 
cliente
áá 
=
áá 
await
áá 
	_mediator
áá  )
.
áá) *
Send
áá* .
(
áá. /
command
áá/ 6
,
áá6 7
cancellationToken
áá8 I
)
ááI J
;
ááJ K
var
ââ 
response
ââ 
=
ââ 
cliente
ââ "
.
ââ" #

ToResponse
ââ# -
(
ââ- .
)
ââ. /
;
ââ/ 0
return
ãã 
Created
ãã 
(
ãã 
$"
ãã 
$str
ãã *
{
ãã* +
response
ãã+ 3
.
ãã3 4
Id
ãã4 6
}
ãã6 7
"
ãã7 8
,
ãã8 9
response
ãã: B
)
ããB C
;
ããC D
}
åå 	
catch
çç 
(
çç &
ClienteConflictException
çç '
ex
çç( *
)
çç* +
{
éé 	
_logger
èè 
.
èè 

LogWarning
èè 
(
èè 
ex
èè !
,
èè! "
$str
èè# O
,
èèO P
request
èèQ X
.
èèX Y
Cuit
èèY ]
)
èè] ^
;
èè^ _
return
êê 
Conflict
êê 
(
êê 
new
êê 
{
êê  !
message
êê" )
=
êê* +
ex
êê, .
.
êê. /
Message
êê/ 6
}
êê7 8
)
êê8 9
;
êê9 :
}
ëë 	
catch
íí 
(
íí 
	Exception
íí 
ex
íí 
)
íí 
{
ìì 	
_logger
îî 
.
îî 
LogError
îî 
(
îî 
ex
îî 
,
îî  
$str
îî! T
,
îîT U
request
îîV ]
.
îî] ^
Cuit
îî^ b
)
îîb c
;
îîc d
return
ïï 

StatusCode
ïï 
(
ïï 
StatusCodes
ïï )
.
ïï) **
Status500InternalServerError
ïï* F
,
ïïF G
new
ïïH K
{
ïïL M
message
ïïN U
=
ïïV W
$str
ïïX v
}
ïïw x
)
ïïx y
;
ïïy z
}
ññ 	
}
óó 
[
úú 
HttpPut
úú 
(
úú 
$str
úú 
)
úú 
]
úú 
[
ùù "
ProducesResponseType
ùù 
(
ùù 
typeof
ùù  
(
ùù  !
ClienteResponse
ùù! 0
)
ùù0 1
,
ùù1 2
StatusCodes
ùù3 >
.
ùù> ?
Status200OK
ùù? J
)
ùùJ K
]
ùùK L
[
ûû "
ProducesResponseType
ûû 
(
ûû 
StatusCodes
ûû %
.
ûû% &!
Status400BadRequest
ûû& 9
)
ûû9 :
]
ûû: ;
[
üü "
ProducesResponseType
üü 
(
üü 
StatusCodes
üü %
.
üü% &
Status404NotFound
üü& 7
)
üü7 8
]
üü8 9
[
†† "
ProducesResponseType
†† 
(
†† 
StatusCodes
†† %
.
††% &
Status409Conflict
††& 7
)
††7 8
]
††8 9
[
°° "
ProducesResponseType
°° 
(
°° 
StatusCodes
°° %
.
°°% &*
Status500InternalServerError
°°& B
)
°°B C
]
°°C D
public
¢¢ 

async
¢¢ 
Task
¢¢ 
<
¢¢ 
IActionResult
¢¢ #
>
¢¢# $
Update
¢¢% +
(
¢¢+ ,
int
¢¢, /
id
¢¢0 2
,
¢¢2 3
[
¢¢4 5
FromBody
¢¢5 =
]
¢¢= >"
UpdateClienteRequest
¢¢? S
request
¢¢T [
,
¢¢[ \
CancellationToken
¢¢] n 
cancellationToken¢¢o Ä
)¢¢Ä Å
{
££ 
if
§§ 

(
§§ 
!
§§ 

ModelState
§§ 
.
§§ 
IsValid
§§ 
)
§§  
{
•• 	
_logger
¶¶ 
.
¶¶ 

LogWarning
¶¶ 
(
¶¶ 
$str
¶¶ U
,
¶¶U V

ModelState
¶¶W a
)
¶¶a b
;
¶¶b c
return
ßß 
ValidationProblem
ßß $
(
ßß$ %

ModelState
ßß% /
)
ßß/ 0
;
ßß0 1
}
®® 	
var
™™ 
command
™™ 
=
™™ 
new
™™ "
UpdateClienteCommand
™™ .
(
™™. /
id
´´ 
,
´´ 
request
¨¨ 
.
¨¨ 
Nombre
¨¨ 
,
¨¨ 
request
≠≠ 
.
≠≠ 
Apellido
≠≠ 
,
≠≠ 
request
ÆÆ 
.
ÆÆ 
RazonSocial
ÆÆ 
,
ÆÆ  
request
ØØ 
.
ØØ 
Cuit
ØØ 
,
ØØ 
request
∞∞ 
.
∞∞ 
FechaNacimiento
∞∞ #
,
∞∞# $
request
±± 
.
±± 
TelefonoCelular
±± #
,
±±# $
request
≤≤ 
.
≤≤ 
Email
≤≤ 
)
≤≤ 
;
≤≤ 
try
¥¥ 
{
µµ 	
var
∂∂ 
cliente
∂∂ 
=
∂∂ 
await
∂∂ 
	_mediator
∂∂  )
.
∂∂) *
Send
∂∂* .
(
∂∂. /
command
∂∂/ 6
,
∂∂6 7
cancellationToken
∂∂8 I
)
∂∂I J
;
∂∂J K
return
∑∑ 
Ok
∑∑ 
(
∑∑ 
cliente
∑∑ 
.
∑∑ 

ToResponse
∑∑ (
(
∑∑( )
)
∑∑) *
)
∑∑* +
;
∑∑+ ,
}
∏∏ 	
catch
ππ 
(
ππ &
ClienteConflictException
ππ '
ex
ππ( *
)
ππ* +
{
∫∫ 	
_logger
ªª 
.
ªª 

LogWarning
ªª 
(
ªª 
ex
ªª !
,
ªª! "
$str
ªª# I
,
ªªI J
id
ªªK M
)
ªªM N
;
ªªN O
return
ºº 
Conflict
ºº 
(
ºº 
new
ºº 
{
ºº  !
message
ºº" )
=
ºº* +
ex
ºº, .
.
ºº. /
Message
ºº/ 6
}
ºº7 8
)
ºº8 9
;
ºº9 :
}
ΩΩ 	
catch
ææ 
(
ææ &
ClienteNotFoundException
ææ '
ex
ææ( *
)
ææ* +
{
øø 	
_logger
¿¿ 
.
¿¿ 

LogWarning
¿¿ 
(
¿¿ 
ex
¿¿ !
,
¿¿! "
$str
¿¿# R
,
¿¿R S
id
¿¿T V
)
¿¿V W
;
¿¿W X
return
¡¡ 
NotFound
¡¡ 
(
¡¡ 
new
¡¡ 
{
¡¡  !
message
¡¡" )
=
¡¡* +
ex
¡¡, .
.
¡¡. /
Message
¡¡/ 6
}
¡¡7 8
)
¡¡8 9
;
¡¡9 :
}
¬¬ 	
catch
√√ 
(
√√ 
	Exception
√√ 
ex
√√ 
)
√√ 
{
ƒƒ 	
_logger
≈≈ 
.
≈≈ 
LogError
≈≈ 
(
≈≈ 
ex
≈≈ 
,
≈≈  
$str
≈≈! N
,
≈≈N O
id
≈≈P R
)
≈≈R S
;
≈≈S T
return
∆∆ 

StatusCode
∆∆ 
(
∆∆ 
StatusCodes
∆∆ )
.
∆∆) **
Status500InternalServerError
∆∆* F
,
∆∆F G
new
∆∆H K
{
∆∆L M
message
∆∆N U
=
∆∆V W
$str
∆∆X v
}
∆∆w x
)
∆∆x y
;
∆∆y z
}
«« 	
}
»» 
[
ÕÕ 

HttpDelete
ÕÕ 
(
ÕÕ 
$str
ÕÕ 
)
ÕÕ 
]
ÕÕ 
[
ŒŒ "
ProducesResponseType
ŒŒ 
(
ŒŒ 
StatusCodes
ŒŒ %
.
ŒŒ% & 
Status204NoContent
ŒŒ& 8
)
ŒŒ8 9
]
ŒŒ9 :
[
œœ "
ProducesResponseType
œœ 
(
œœ 
StatusCodes
œœ %
.
œœ% &
Status404NotFound
œœ& 7
)
œœ7 8
]
œœ8 9
[
–– "
ProducesResponseType
–– 
(
–– 
StatusCodes
–– %
.
––% &*
Status500InternalServerError
––& B
)
––B C
]
––C D
public
—— 

async
—— 
Task
—— 
<
—— 
IActionResult
—— #
>
——# $
Delete
——% +
(
——+ ,
int
——, /
id
——0 2
,
——2 3
CancellationToken
——4 E
cancellationToken
——F W
)
——W X
{
““ 
try
”” 
{
‘‘ 	
await
’’ 
	_mediator
’’ 
.
’’ 
Send
’’  
(
’’  !
new
’’! $"
DeleteClienteCommand
’’% 9
(
’’9 :
id
’’: <
)
’’< =
,
’’= >
cancellationToken
’’? P
)
’’P Q
;
’’Q R
return
÷÷ 
	NoContent
÷÷ 
(
÷÷ 
)
÷÷ 
;
÷÷ 
}
◊◊ 	
catch
ÿÿ 
(
ÿÿ &
ClienteNotFoundException
ÿÿ '
ex
ÿÿ( *
)
ÿÿ* +
{
ŸŸ 	
_logger
⁄⁄ 
.
⁄⁄ 

LogWarning
⁄⁄ 
(
⁄⁄ 
ex
⁄⁄ !
,
⁄⁄! "
$str
⁄⁄# P
,
⁄⁄P Q
id
⁄⁄R T
)
⁄⁄T U
;
⁄⁄U V
return
€€ 
NotFound
€€ 
(
€€ 
new
€€ 
{
€€  !
message
€€" )
=
€€* +
ex
€€, .
.
€€. /
Message
€€/ 6
}
€€7 8
)
€€8 9
;
€€9 :
}
‹‹ 	
catch
›› 
(
›› 
	Exception
›› 
ex
›› 
)
›› 
{
ﬁﬁ 	
_logger
ﬂﬂ 
.
ﬂﬂ 
LogError
ﬂﬂ 
(
ﬂﬂ 
ex
ﬂﬂ 
,
ﬂﬂ  
$str
ﬂﬂ! L
,
ﬂﬂL M
id
ﬂﬂN P
)
ﬂﬂP Q
;
ﬂﬂQ R
return
‡‡ 

StatusCode
‡‡ 
(
‡‡ 
StatusCodes
‡‡ )
.
‡‡) **
Status500InternalServerError
‡‡* F
,
‡‡F G
new
‡‡H K
{
‡‡L M
message
‡‡N U
=
‡‡V W
$str
‡‡X v
}
‡‡w x
)
‡‡x y
;
‡‡y z
}
·· 	
}
‚‚ 
}‰‰ 